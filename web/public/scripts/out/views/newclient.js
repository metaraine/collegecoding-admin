// Generated by CoffeeScript 1.4.0
(function() {

  client.views.newclient = Backbone.View.extend({
    events: {
      'click #create': 'create'
    },
    initialize: function() {
      var that;
      that = this;
      return $(document).on('keypress', function(e) {
        if (e.keyCode === 13) {
          return that.create();
        }
      });
    },
    create: function() {
      return $.post('/db/clients', {
        name: this.model.get('name'),
        clientType: 'Lead',
        leadStatus: 'hot',
        referrer: 'Google',
        created: new Date(),
        firstContact: new Date()
      }, function() {
        return location.reload();
      });
    },
    build: function() {
      return [
        '#page-newclient', [
          [
            '.container-narrow', [
              new client.partials.Header(), [
                '.text-center', [
                  [
                    'h1', {
                      'data-name': 'name'
                    }, this.model.get('name')
                  ], ['p', "This client does not yet exist. Would you like to create " + (this.model.get('name')) + "?"], ['button#create.btn.btn-primary.btn-large', 'Create']
                ]
              ], new client.partials.Footer()
            ]
          ]
        ]
      ];
    }
  });

}).call(this);
